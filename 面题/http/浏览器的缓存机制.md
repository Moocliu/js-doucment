# 浏览器的缓存机制

## 什么是缓存

是一种保存资源副本并在下次请求是直接使用该副本的技术。那么浏览器的缓存就是浏览器请求网站的留下的资源副本

## 缓存的好处

1. 缓解服务器压力（不用每次请求资源）

2.提升性能（打开本地资源速度当然比请求回来的在打开的要快的多）

3.减少带宽消耗

## 浏览的缓存策略

浏览器对于缓存的处理是根据第一次请求资源时返回的”响应头“来确定的
策略分为三种： 强缓存 、协商缓存、 启发式缓存

## 浏览器常见字段和指令

在讲强缓存和协商缓存之前先提前了解以下这几个字段和指令,便于后面理解:

```js
expires: 告知客户端资源缓存失效的绝对时间

last-modified: 资源最后一次修改的时间

Etag: 文件的特殊标识

cache-control:告诉客户端或是服务器如何处理缓存。

private: cache-control里的响应指令.表示客户端可以缓存

public: cache-control里的响应指令.表示客户端和代理服务器都可缓存.如果没有明确指定private，则默认为public。

no-cache: cache-control里的指令.表示需要可以缓存，但每次用应该去向服务器验证缓存是否可用

no-store: cache-control字段里的指令.表示所有内容都不会缓存，强制缓存，对比缓存都不会触发.

max-age=xxx: cache-control字段里的指令.表示缓存的内容将在 xxx 秒后失效

```

## 强缓存

强缓存：就是给浏览器缓存设置过期时间，超过过期时间之后缓存就过期，浏览器需要重新请求

主要是通过 http 请求头中的 Cache-Control 和 Expires 两个字段控制

### 使用方式

expires 使用的是绝对时间 ，但是弊端就是使用的是服务器的时间，判断的是客户端的时间
因此就引入了 Cache-Control :max-age

优先级： max-age >expires 强缓存在浏览器表现为 200 状态码

## 协商缓存

协商缓存：解决了无法及时获取更新资源的问题，

主要通过 【Last-Modified，If-Modified-Since】和【ETag、If-None-Match】这两对 Header 来管理的。 对资源做标识，然后由服务器做分析，如果资源未更新，则返回 304 状态码，那么浏览器则会从缓存中读取资源，否则请求新的资源

### 缓存的优先级

在缓存策略上:强缓存>协商缓存>启发式缓存

进一步分析可得出,以下优先级：
Cache-Control > Expires > ETag > Last-Modified

### 非常注意

作者：shotCat
链接：https://juejin.im/post/5c6c9c99f265da2d896326ae
来源：掘金
